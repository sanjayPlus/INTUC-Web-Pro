(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1835],{30558:function(e,t,s){Promise.resolve().then(s.bind(s,81947))},81947:function(e,t,s){"use strict";s.r(t);var r=s(3827),n=s(1017),l=s(50211),c=s(4205),a=s(7908),i=s(47907),u=s(64090),o=s(18009);t.default=function(){let e=(0,i.useRouter)(),[t,s]=(0,u.useState)(""),[f,d]=(0,u.useState)(60),[m,h]=(0,u.useState)(0),[x,g]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let t=localStorage.getItem("token");t?a.Z.get(c.Z+"/user/details",{headers:{"x-access-token":t}}).then(async t=>{t.data||(e.push("/login"),localStorage.removeItem("token")),t.data.isVerified?e.push("/home"):(s(t.data.email),g(e=>!e))}):e.push("/login")},[]),(0,u.useEffect)(()=>{p()},[x]);let p=()=>{console.log(t),t&&a.Z.post(c.Z+"/user/sendOTP",{email:t}).then(e=>{o.ZP.success("OTP sent successfully")}).catch(e=>{o.ZP.error("Error sending OTP")})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",style:{backgroundImage:"url('./images/bg-1.png')",backgroundSize:"cover"},children:[(0,r.jsx)("div",{className:"w-full h-16 flex justify-center items-center mt-28",children:(0,r.jsx)("img",{src:"./images/logo.png",alt:"",className:"w-24"})}),(0,r.jsxs)("div",{className:"flex-1 justify-center items-center bg-slate-900 rounded-t-3xl mt-20",children:[(0,r.jsxs)("div",{className:"input-container pt-10 pb-5 flex flex-col w-full justify-center items-center",children:[(0,r.jsx)(l.Z,{length:6,onVerify:e=>{h(Number(e))}}),(0,r.jsx)("p",{className:"text-amber-500 mt-4 cursor-pointer",onClick:p,children:"Resend"})]}),(0,r.jsx)("div",{className:"w-full flex justify-center items-center ",children:(0,r.jsx)("button",{className:"bg-amber-500 text-white w-80 text-xl py-2 rounded-xl font-semibold",onClick:()=>{m&&a.Z.post(c.Z+"/user/verifyOTP",{email:t,otp:Number(m)}).then(t=>{200===t.status&&e.replace("/home")}).catch(e=>{o.ZP.error("Invalid OTP")})},children:"Verify"})})]})]})})})}},1017:function(e,t,s){"use strict";var r=s(3827);s(64090);var n=s(18009);t.Z=function(e){let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-screen h-screen flex justify-center items-center overflow-x-hidden",children:(0,r.jsx)("div",{className:"md:w-[30%] w-full h-screen shadow-lg",children:t})}),(0,r.jsx)(n.x7,{})]})}},50211:function(e,t,s){"use strict";var r=s(3827),n=s(64090);t.Z=e=>{let{length:t,onVerify:s}=e,[l,c]=(0,n.useState)(Array(t).fill("")),a=(0,n.useRef)(Array(t).fill(null).map(()=>n.createRef())),i=(e,r)=>{let n=[...l];n[e]=r,c(n),""!==r&&e<t-1&&a.current[e+1].current.focus(),n.every(e=>""!==e)&&s(n.join(""))},u=(e,t)=>{"Backspace"===t.key&&e>0&&""===l[e]&&a.current[e-1].current.focus()};return(0,r.jsx)("div",{className:"flex space-x-2",children:l.map((e,t)=>(0,r.jsx)("input",{type:"text",value:e,maxLength:1,onChange:e=>i(t,e.target.value),onKeyDown:e=>u(t,e),ref:a.current[t],className:"w-10 h-10 text-center border rounded-md focus:outline-none focus:border-blue-500"},t))})}},4205:function(e,t){"use strict";t.Z="https://backend.intucthrissur.com/api"}},function(e){e.O(0,[1296,7908,2971,9362,560],function(){return e(e.s=30558)}),_N_E=e.O()}]);